<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THE HUB - Code Linker</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      background: linear-gradient(135deg, #6a0dad, #1a0033);
      font-family: 'Orbitron', sans-serif;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 0 25px rgba(255, 255, 255, 0.2);
      width: 90%;
      max-width: 400px;
    }

    h3 {
      font-size: 1.5rem;
      font-style: italic;
      font-weight: bold;
      animation: wave 2.5s ease-in-out infinite alternate;
    }

    @keyframes wave {
      0% { transform: rotate(-1deg) translateY(0px); }
      100% { transform: rotate(1deg) translateY(5px); }
    }

    .input-container {
      display: flex;
      margin-top: 20px;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px #000;
    }

    input {
      flex: 1;
      padding: 15px;
      border: none;
      font-size: 16px;
      border-left: 4px solid #25d366;
      background: #000;
      color: #fff;
    }

    input:focus {
      outline: none;
      box-shadow: 0 0 10px #25d366 inset;
    }

    button {
      background: #25d366;
      color: #fff;
      font-weight: bold;
      border: none;
      padding: 15px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background: #128c7e;
    }

    #copy-button {
      background-color: #ff4d4d;
      margin-top: 15px;
      display: none;
    }

    #loading-spinner {
      margin-top: 10px;
      display: none;
    }

    .fa-spinner {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0); }
      100% { transform: rotate(360deg); }
    }

    p {
      margin: 10px 0;
    }

    footer {
      text-align: center;
      margin-top: 20px;
      font-size: 14px;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>â˜˜ï¸ â“ƒâ’ºCâ“‰ORğŸ¯-ALL-SESSION ğŸ¤ª</h3>
    <h3>ğ‘ğğ ğšğ«ğğ¬ â“ƒâ’ºCâ“‰ORğŸ¯ğŸ—</h3>
    <p>ğŸ­ Enter Your WhatsApp Number with Country Code</p>

    <div class="input-container">
      <input type="number" id="number" placeholder="254xxxxxxxxx" />
      <button id="submit">Code</button>
    </div>

    <div id="loading-spinner">
      <i class="fas fa-spinner fa-spin"></i>
    </div>

    <main id="pair"></main>
    <button id="copy-button" onclick="CopyCode()">ğŸ“‹ Copy Code</button>

    <p id="battery">ğŸ”‹ Battery: --%</p>
    <p id="local-time">ğŸ•’ Time: --:--</p>
    <button onclick="PauseMusic()">â¸ Pause Music</button>
    <footer>The Hubâœ¨ &copy; <span id="currentYear"></span></footer>
  </div>

  <!-- Music autoplay -->
  <audio id="bg-music" autoplay loop>
    <source src="https://files.catbox.moe/l5n20t.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
  <script>
    const a = document.getElementById("pair");
    const b = document.getElementById("submit");
    const c = document.getElementById("number");
    const copyBtn = document.getElementById("copy-button");

    b.addEventListener("click", async (e) => {
      e.preventDefault();
      if (!c.value) {
        a.innerHTML = '<p style="color:red;font-weight:bold">â— Enter your WhatsApp number with country code.</p>';
        copyBtn.style.display = "none";
        return;
      }

      const bc = c.value.replace(/[^0-9]/g, "");
      if (bc.length < 11) {
        a.innerHTML = '<p style="color:red;font-weight:bold">â— Invalid number format. Please try again.</p>';
        copyBtn.style.display = "none";
        return;
      }

      document.getElementById("loading-spinner").style.display = "block";
      a.innerHTML = '';
      copyBtn.style.display = "none";

      try {
        const { data } = await axios(`/code?number=${bc}`);
        const code = data.code || "â— Service Unavailable";
        a.innerHTML = `<p id="display-code" style="color:#00ffcc;font-size:20px;font-weight:bold;">CODE: ${code}</p>`;
        copyBtn.style.display = "inline-block";
      } catch {
        a.innerHTML = `<p style="color:red;">â— Unable to fetch code. Try again later.</p>`;
      }

      document.getElementById("loading-spinner").style.display = "none";
    });

    function CopyCode() {
      const codeText = document.getElementById("display-code").innerText.replace("CODE: ", "");
      navigator.clipboard.writeText(codeText).then(() => {
        copyBtn.innerText = "âœ”ï¸ Copied!";
        setTimeout(() => {
          copyBtn.innerText = "ğŸ“‹ Copy Code";
        }, 1000);
      });
    }

    // Battery
    navigator.getBattery().then(battery => {
      function updateBattery() {
        document.getElementById("battery").innerText = `ğŸ”‹ Battery: ${Math.round(battery.level * 100)}%`;
      }
      updateBattery();
      battery.addEventListener("levelchange", updateBattery);
    });

    // Time
    function updateTime() {
      const now = new Date();
      document.getElementById("local-time").innerText = `ğŸ•’ Time: ${now.toLocaleTimeString()}`;
    }
    setInterval(updateTime, 1000);
    updateTime();

    // Music Pause
    function PauseMusic() {
      const music = document.getElementById("bg-music");
      if (!music.paused) music.pause();
    }

    // Footer Year
    document.getElementById("currentYear").textContent = new Date().getFullYear();
  </script>
</body>
    </html>
    
